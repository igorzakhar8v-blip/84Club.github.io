<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Practice multiplication tables from 1 to 12 with Eva's fun math game!">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="84 Club">
    <title>Eva's 84 Club Adventure! üåü</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Comic+Neue:wght@700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Allow selection in input fields */
        input, textarea {
            -webkit-user-select: text;
            user-select: text;
        }
        
        html, body {
            width: 100%;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Fredoka', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: slideDown 0.8s ease-out;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .title {
            font-family: 'Comic Neue', cursive;
            font-size: 3.5rem;
            color: #fff;
            text-shadow: 4px 4px 0 #ff6b6b, 8px 8px 0 #4ecdc4;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: #ffe66d;
            font-weight: 600;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .progress-container {
            background: white;
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: fadeIn 1s ease-out 0.3s both;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .timer {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4ecdc4;
            padding: 10px 20px;
            background: rgba(78, 205, 196, 0.1);
            border-radius: 15px;
            transition: all 0.3s;
        }
        
        .timer.warning {
            color: #feca57;
            background: rgba(254, 202, 87, 0.2);
            animation: pulse 1s infinite;
        }
        
        .timer.danger {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.2);
            animation: pulse 0.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .score {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
        }
        
        .goal {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ff6b6b;
        }
        
        .problems-counter {
            text-align: center;
            font-size: 1.4rem;
            font-weight: 600;
            color: #764ba2;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(118, 75, 162, 0.1);
            border-radius: 10px;
        }
        
        .problems-counter span {
            color: #667eea;
            font-size: 1.6rem;
        }
        
        .progress-bar-container {
            background: #f0f0f0;
            border-radius: 20px;
            height: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff6b6b);
            background-size: 400% 100%;
            border-radius: 20px;
            transition: width 0.5s ease-out;
            animation: gradientMove 3s ease infinite;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            font-weight: 700;
            color: #333;
            font-size: 1.1rem;
            z-index: 1;
        }
        
        .game-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: fadeIn 1s ease-out 0.6s both;
        }
        
        .question-container {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .question {
            font-size: 3.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 20px;
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .input-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .answer-input {
            font-family: 'Fredoka', sans-serif;
            font-size: 2.5rem;
            font-weight: 600;
            width: 150px;
            padding: 15px;
            text-align: center;
            border: 4px solid #667eea;
            border-radius: 15px;
            outline: none;
            transition: all 0.3s;
        }
        
        .answer-input:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
            transform: scale(1.05);
        }
        
        .btn {
            font-family: 'Fredoka', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            padding: 15px 40px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn-check {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
        }
        
        .btn-check:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(78, 205, 196, 0.4);
        }
        
        .btn-check:active {
            transform: translateY(0);
        }
        
        .feedback {
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            margin-top: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .correct {
            color: #4ecdc4;
            animation: celebrate 0.6s ease-out;
        }
        
        .incorrect {
            color: #ff6b6b;
            animation: shake 0.5s ease-out;
        }
        
        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-5deg); }
            75% { transform: scale(1.2) rotate(5deg); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            position: absolute;
            animation: confettiFall 3s ease-out forwards;
        }
        
        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .completion-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 30px;
            padding: 50px;
            text-align: center;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalPop 0.5s ease-out;
        }
        
        @keyframes modalPop {
            0% { transform: scale(0) rotate(-180deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .modal-title {
            font-family: 'Comic Neue', cursive;
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .modal-message {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 30px;
        }
        
        .btn-restart {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
        }
        
        .btn-restart:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }
        
        .emoji {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .mistake-item {
            background: white;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 10px;
            border-left: 5px solid #ff6b6b;
        }
        
        .mistake-problem {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }
        
        .mistake-details {
            font-size: 1rem;
            color: #666;
        }
        
        .correct-answer {
            color: #4ecdc4;
            font-weight: 700;
        }
        
        .wrong-answer {
            color: #ff6b6b;
            font-weight: 600;
            text-decoration: line-through;
        }
        
        .study-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: fadeIn 1s ease-out;
        }
        
        .answers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
            max-height: 500px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .answer-item {
            background: white;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1rem;
            color: #333;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }
        
        .answer-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);
        }
        
        .answer-item strong {
            color: #4ecdc4;
            font-size: 1.2rem;
        }
        
        .btn-start {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-size: 2rem;
            padding: 20px 60px;
            display: block;
            margin: 0 auto;
            cursor: pointer;
            border: none;
            border-radius: 15px;
            font-family: 'Fredoka', sans-serif;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }
        
        .btn-start:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <!-- Study Screen -->
        <div class="study-screen" id="study-screen">
            <div class="header">
                <h1 class="title">Eva's 84 Club! üåü</h1>
                <p class="subtitle">Study these problems first, then press Start when you're ready!</p>
            </div>
            
            <div class="study-card">
                <h2 style="text-align: center; color: #667eea; margin-bottom: 20px; font-size: 2rem;">üìö Answer Key - Study Time!</h2>
                <div class="answers-grid">
                    <div class="answer-item">1 √ó 1 = <strong>1</strong></div>
                    <div class="answer-item">1 √ó 2 = <strong>2</strong></div>
                    <div class="answer-item">1 √ó 3 = <strong>3</strong></div>
                    <div class="answer-item">1 √ó 4 = <strong>4</strong></div>
                    <div class="answer-item">1 √ó 5 = <strong>5</strong></div>
                    <div class="answer-item">1 √ó 6 = <strong>6</strong></div>
                    <div class="answer-item">1 √ó 7 = <strong>7</strong></div>
                    <div class="answer-item">1 √ó 8 = <strong>8</strong></div>
                    <div class="answer-item">1 √ó 9 = <strong>9</strong></div>
                    <div class="answer-item">1 √ó 10 = <strong>10</strong></div>
                    <div class="answer-item">1 √ó 11 = <strong>11</strong></div>
                    <div class="answer-item">1 √ó 12 = <strong>12</strong></div>
                    <div class="answer-item">2 √ó 1 = <strong>2</strong></div>
                    <div class="answer-item">2 √ó 2 = <strong>4</strong></div>
                    <div class="answer-item">2 √ó 3 = <strong>6</strong></div>
                    <div class="answer-item">2 √ó 4 = <strong>8</strong></div>
                    <div class="answer-item">2 √ó 5 = <strong>10</strong></div>
                    <div class="answer-item">2 √ó 6 = <strong>12</strong></div>
                    <div class="answer-item">2 √ó 7 = <strong>14</strong></div>
                    <div class="answer-item">2 √ó 8 = <strong>16</strong></div>
                    <div class="answer-item">2 √ó 9 = <strong>18</strong></div>
                    <div class="answer-item">2 √ó 10 = <strong>20</strong></div>
                    <div class="answer-item">2 √ó 11 = <strong>22</strong></div>
                    <div class="answer-item">2 √ó 12 = <strong>24</strong></div>
                    <div class="answer-item">3 √ó 1 = <strong>3</strong></div>
                    <div class="answer-item">3 √ó 2 = <strong>6</strong></div>
                    <div class="answer-item">3 √ó 3 = <strong>9</strong></div>
                    <div class="answer-item">3 √ó 4 = <strong>12</strong></div>
                    <div class="answer-item">3 √ó 5 = <strong>15</strong></div>
                    <div class="answer-item">3 √ó 6 = <strong>18</strong></div>
                    <div class="answer-item">3 √ó 7 = <strong>21</strong></div>
                    <div class="answer-item">3 √ó 8 = <strong>24</strong></div>
                    <div class="answer-item">3 √ó 9 = <strong>27</strong></div>
                    <div class="answer-item">3 √ó 10 = <strong>30</strong></div>
                    <div class="answer-item">3 √ó 11 = <strong>33</strong></div>
                    <div class="answer-item">3 √ó 12 = <strong>36</strong></div>
                    <div class="answer-item">4 √ó 1 = <strong>4</strong></div>
                    <div class="answer-item">4 √ó 2 = <strong>8</strong></div>
                    <div class="answer-item">4 √ó 3 = <strong>12</strong></div>
                    <div class="answer-item">4 √ó 4 = <strong>16</strong></div>
                    <div class="answer-item">4 √ó 5 = <strong>20</strong></div>
                    <div class="answer-item">4 √ó 6 = <strong>24</strong></div>
                    <div class="answer-item">4 √ó 7 = <strong>28</strong></div>
                    <div class="answer-item">4 √ó 8 = <strong>32</strong></div>
                    <div class="answer-item">4 √ó 9 = <strong>36</strong></div>
                    <div class="answer-item">4 √ó 10 = <strong>40</strong></div>
                    <div class="answer-item">4 √ó 11 = <strong>44</strong></div>
                    <div class="answer-item">4 √ó 12 = <strong>48</strong></div>
                    <div class="answer-item">5 √ó 1 = <strong>5</strong></div>
                    <div class="answer-item">5 √ó 2 = <strong>10</strong></div>
                    <div class="answer-item">5 √ó 3 = <strong>15</strong></div>
                    <div class="answer-item">5 √ó 4 = <strong>20</strong></div>
                    <div class="answer-item">5 √ó 5 = <strong>25</strong></div>
                    <div class="answer-item">5 √ó 6 = <strong>30</strong></div>
                    <div class="answer-item">5 √ó 7 = <strong>35</strong></div>
                    <div class="answer-item">5 √ó 8 = <strong>40</strong></div>
                    <div class="answer-item">5 √ó 9 = <strong>45</strong></div>
                    <div class="answer-item">5 √ó 10 = <strong>50</strong></div>
                    <div class="answer-item">5 √ó 11 = <strong>55</strong></div>
                    <div class="answer-item">5 √ó 12 = <strong>60</strong></div>
                    <div class="answer-item">6 √ó 1 = <strong>6</strong></div>
                    <div class="answer-item">6 √ó 2 = <strong>12</strong></div>
                    <div class="answer-item">6 √ó 3 = <strong>18</strong></div>
                    <div class="answer-item">6 √ó 4 = <strong>24</strong></div>
                    <div class="answer-item">6 √ó 5 = <strong>30</strong></div>
                    <div class="answer-item">6 √ó 6 = <strong>36</strong></div>
                    <div class="answer-item">6 √ó 7 = <strong>42</strong></div>
                    <div class="answer-item">6 √ó 8 = <strong>48</strong></div>
                    <div class="answer-item">6 √ó 9 = <strong>54</strong></div>
                    <div class="answer-item">6 √ó 10 = <strong>60</strong></div>
                    <div class="answer-item">6 √ó 11 = <strong>66</strong></div>
                    <div class="answer-item">6 √ó 12 = <strong>72</strong></div>
                    <div class="answer-item">7 √ó 1 = <strong>7</strong></div>
                    <div class="answer-item">7 √ó 2 = <strong>14</strong></div>
                    <div class="answer-item">7 √ó 3 = <strong>21</strong></div>
                    <div class="answer-item">7 √ó 4 = <strong>28</strong></div>
                    <div class="answer-item">7 √ó 5 = <strong>35</strong></div>
                    <div class="answer-item">7 √ó 6 = <strong>42</strong></div>
                    <div class="answer-item">7 √ó 7 = <strong>49</strong></div>
                    <div class="answer-item">7 √ó 8 = <strong>56</strong></div>
                    <div class="answer-item">7 √ó 9 = <strong>63</strong></div>
                    <div class="answer-item">7 √ó 10 = <strong>70</strong></div>
                    <div class="answer-item">7 √ó 11 = <strong>77</strong></div>
                    <div class="answer-item">7 √ó 12 = <strong>84</strong></div>
                    <div class="answer-item">8 √ó 1 = <strong>8</strong></div>
                    <div class="answer-item">8 √ó 2 = <strong>16</strong></div>
                    <div class="answer-item">8 √ó 3 = <strong>24</strong></div>
                    <div class="answer-item">8 √ó 4 = <strong>32</strong></div>
                    <div class="answer-item">8 √ó 5 = <strong>40</strong></div>
                    <div class="answer-item">8 √ó 6 = <strong>48</strong></div>
                    <div class="answer-item">8 √ó 7 = <strong>56</strong></div>
                    <div class="answer-item">8 √ó 8 = <strong>64</strong></div>
                    <div class="answer-item">8 √ó 9 = <strong>72</strong></div>
                    <div class="answer-item">8 √ó 10 = <strong>80</strong></div>
                    <div class="answer-item">8 √ó 11 = <strong>88</strong></div>
                    <div class="answer-item">8 √ó 12 = <strong>96</strong></div>
                    <div class="answer-item">9 √ó 1 = <strong>9</strong></div>
                    <div class="answer-item">9 √ó 2 = <strong>18</strong></div>
                    <div class="answer-item">9 √ó 3 = <strong>27</strong></div>
                    <div class="answer-item">9 √ó 4 = <strong>36</strong></div>
                    <div class="answer-item">9 √ó 5 = <strong>45</strong></div>
                    <div class="answer-item">9 √ó 6 = <strong>54</strong></div>
                    <div class="answer-item">9 √ó 7 = <strong>63</strong></div>
                    <div class="answer-item">9 √ó 8 = <strong>72</strong></div>
                    <div class="answer-item">9 √ó 9 = <strong>81</strong></div>
                    <div class="answer-item">9 √ó 10 = <strong>90</strong></div>
                    <div class="answer-item">9 √ó 11 = <strong>99</strong></div>
                    <div class="answer-item">9 √ó 12 = <strong>108</strong></div>
                    <div class="answer-item">10 √ó 1 = <strong>10</strong></div>
                    <div class="answer-item">10 √ó 2 = <strong>20</strong></div>
                    <div class="answer-item">10 √ó 3 = <strong>30</strong></div>
                    <div class="answer-item">10 √ó 4 = <strong>40</strong></div>
                    <div class="answer-item">10 √ó 5 = <strong>50</strong></div>
                    <div class="answer-item">10 √ó 6 = <strong>60</strong></div>
                    <div class="answer-item">10 √ó 7 = <strong>70</strong></div>
                    <div class="answer-item">10 √ó 8 = <strong>80</strong></div>
                    <div class="answer-item">10 √ó 9 = <strong>90</strong></div>
                    <div class="answer-item">10 √ó 10 = <strong>100</strong></div>
                    <div class="answer-item">10 √ó 11 = <strong>110</strong></div>
                    <div class="answer-item">10 √ó 12 = <strong>120</strong></div>
                    <div class="answer-item">11 √ó 1 = <strong>11</strong></div>
                    <div class="answer-item">11 √ó 2 = <strong>22</strong></div>
                    <div class="answer-item">11 √ó 3 = <strong>33</strong></div>
                    <div class="answer-item">11 √ó 4 = <strong>44</strong></div>
                    <div class="answer-item">11 √ó 5 = <strong>55</strong></div>
                    <div class="answer-item">11 √ó 6 = <strong>66</strong></div>
                    <div class="answer-item">11 √ó 7 = <strong>77</strong></div>
                    <div class="answer-item">11 √ó 8 = <strong>88</strong></div>
                    <div class="answer-item">11 √ó 9 = <strong>99</strong></div>
                    <div class="answer-item">11 √ó 10 = <strong>110</strong></div>
                    <div class="answer-item">11 √ó 11 = <strong>121</strong></div>
                    <div class="answer-item">11 √ó 12 = <strong>132</strong></div>
                    <div class="answer-item">12 √ó 1 = <strong>12</strong></div>
                    <div class="answer-item">12 √ó 2 = <strong>24</strong></div>
                    <div class="answer-item">12 √ó 3 = <strong>36</strong></div>
                    <div class="answer-item">12 √ó 4 = <strong>48</strong></div>
                    <div class="answer-item">12 √ó 5 = <strong>60</strong></div>
                    <div class="answer-item">12 √ó 6 = <strong>72</strong></div>
                    <div class="answer-item">12 √ó 7 = <strong>84</strong></div>
                    <div class="answer-item">12 √ó 8 = <strong>96</strong></div>
                    <div class="answer-item">12 √ó 9 = <strong>108</strong></div>
                    <div class="answer-item">12 √ó 10 = <strong>120</strong></div>
                    <div class="answer-item">12 √ó 11 = <strong>132</strong></div>
                    <div class="answer-item">12 √ó 12 = <strong>144</strong></div>                </div>
                
                <button class="btn btn-start" onclick="startGame()">üöÄ Start Game!</button>
            </div>
        </div>
        
        <!-- Game Screen -->
        <div class="game-screen" id="game-screen" style="display: none;">
        <div class="header">
            <h1 class="title">Eva's 84 Club! üåü</h1>
            <p class="subtitle">Answer all 84 problems to become a Math Champion!</p>
        </div>
        
        <div class="progress-container">
            <div class="progress-header">
                <div class="score">‚ú® Correct: <span id="correct-count">0</span></div>
                <div class="timer" id="timer">‚è∞ 12:00</div>
                <div class="goal">üéØ Goal: 84</div>
            </div>
            <div class="problems-counter" id="problems-counter">
                Question <span id="current-problem">0</span> of 84
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%;">
                    <span class="progress-text" id="progress-text">0 / 84</span>
                </div>
            </div>
        </div>
        
        <div class="game-card">
            <div class="question-container">
                <div class="question" id="question">Loading...</div>
            </div>
            
            <div class="input-container">
                <input type="number" class="answer-input" id="answer-input" placeholder="?" autofocus>
                <button class="btn btn-check" id="check-btn" onclick="checkAnswer()">Check! ‚úì</button>
            </div>
            
            <div class="feedback" id="feedback"></div>
        </div>
        </div>
        <!-- End Game Screen -->
    </div>
    
    <div class="completion-modal" id="completion-modal">
        <div class="modal-content">
            <div class="emoji">üéâ</div>
            <h2 class="modal-title">Amazing Job, Eva!</h2>
            <p class="modal-message">You completed all 84 problems!<br>You're a Math Champion! üèÜ</p>
            
            <div class="results-summary" id="results-summary" style="display: none;">
                <div style="background: linear-gradient(135deg, #4ecdc4, #44a08d); padding: 25px; border-radius: 20px; margin: 20px 0;">
                    <h3 style="color: white; font-size: 1.8rem; margin-bottom: 10px;">üìä Your Results</h3>
                    <div style="font-size: 3rem; font-weight: 700; color: white;" id="score-display">0 / 84</div>
                    <div style="font-size: 1.3rem; color: white; margin-top: 10px;" id="percentage-display">0% Correct</div>
                </div>
            </div>
            
            <div id="mistakes-review" style="display: none;">
                <div style="margin-top: 20px; padding: 20px; background: #fff3cd; border-radius: 15px; text-align: left;">
                    <h3 style="color: #856404; margin-bottom: 15px; text-align: center;">üìö Let's Review These Together!</h3>
                    <div id="mistakes-list" style="max-height: 300px; overflow-y: auto;"></div>
                </div>
            </div>
            
            <button class="btn btn-restart" onclick="restartGame()" style="margin-top: 20px;">Play Again! üîÑ</button>
        </div>
    </div>

    <script>
        const problems = [
            {q: "1 √ó 1", a: 1}, {q: "1 √ó 2", a: 2}, {q: "1 √ó 3", a: 3}, {q: "1 √ó 4", a: 4}, {q: "1 √ó 5", a: 5}, {q: "1 √ó 6", a: 6}, {q: "1 √ó 7", a: 7}, {q: "1 √ó 8", a: 8}, {q: "1 √ó 9", a: 9}, {q: "1 √ó 10", a: 10}, {q: "1 √ó 11", a: 11}, {q: "1 √ó 12", a: 12},
            {q: "2 √ó 1", a: 2}, {q: "2 √ó 2", a: 4}, {q: "2 √ó 3", a: 6}, {q: "2 √ó 4", a: 8}, {q: "2 √ó 5", a: 10}, {q: "2 √ó 6", a: 12}, {q: "2 √ó 7", a: 14}, {q: "2 √ó 8", a: 16}, {q: "2 √ó 9", a: 18}, {q: "2 √ó 10", a: 20}, {q: "2 √ó 11", a: 22}, {q: "2 √ó 12", a: 24},
            {q: "3 √ó 1", a: 3}, {q: "3 √ó 2", a: 6}, {q: "3 √ó 3", a: 9}, {q: "3 √ó 4", a: 12}, {q: "3 √ó 5", a: 15}, {q: "3 √ó 6", a: 18}, {q: "3 √ó 7", a: 21}, {q: "3 √ó 8", a: 24}, {q: "3 √ó 9", a: 27}, {q: "3 √ó 10", a: 30}, {q: "3 √ó 11", a: 33}, {q: "3 √ó 12", a: 36},
            {q: "4 √ó 1", a: 4}, {q: "4 √ó 2", a: 8}, {q: "4 √ó 3", a: 12}, {q: "4 √ó 4", a: 16}, {q: "4 √ó 5", a: 20}, {q: "4 √ó 6", a: 24}, {q: "4 √ó 7", a: 28}, {q: "4 √ó 8", a: 32}, {q: "4 √ó 9", a: 36}, {q: "4 √ó 10", a: 40}, {q: "4 √ó 11", a: 44}, {q: "4 √ó 12", a: 48},
            {q: "5 √ó 1", a: 5}, {q: "5 √ó 2", a: 10}, {q: "5 √ó 3", a: 15}, {q: "5 √ó 4", a: 20}, {q: "5 √ó 5", a: 25}, {q: "5 √ó 6", a: 30}, {q: "5 √ó 7", a: 35}, {q: "5 √ó 8", a: 40}, {q: "5 √ó 9", a: 45}, {q: "5 √ó 10", a: 50}, {q: "5 √ó 11", a: 55}, {q: "5 √ó 12", a: 60},
            {q: "6 √ó 1", a: 6}, {q: "6 √ó 2", a: 12}, {q: "6 √ó 3", a: 18}, {q: "6 √ó 4", a: 24}, {q: "6 √ó 5", a: 30}, {q: "6 √ó 6", a: 36}, {q: "6 √ó 7", a: 42}, {q: "6 √ó 8", a: 48}, {q: "6 √ó 9", a: 54}, {q: "6 √ó 10", a: 60}, {q: "6 √ó 11", a: 66}, {q: "6 √ó 12", a: 72},
            {q: "7 √ó 1", a: 7}, {q: "7 √ó 2", a: 14}, {q: "7 √ó 3", a: 21}, {q: "7 √ó 4", a: 28}, {q: "7 √ó 5", a: 35}, {q: "7 √ó 6", a: 42}, {q: "7 √ó 7", a: 49}, {q: "7 √ó 8", a: 56}, {q: "7 √ó 9", a: 63}, {q: "7 √ó 10", a: 70}, {q: "7 √ó 11", a: 77}, {q: "7 √ó 12", a: 84},
            {q: "8 √ó 1", a: 8}, {q: "8 √ó 2", a: 16}, {q: "8 √ó 3", a: 24}, {q: "8 √ó 4", a: 32}, {q: "8 √ó 5", a: 40}, {q: "8 √ó 6", a: 48}, {q: "8 √ó 7", a: 56}, {q: "8 √ó 8", a: 64}, {q: "8 √ó 9", a: 72}, {q: "8 √ó 10", a: 80}, {q: "8 √ó 11", a: 88}, {q: "8 √ó 12", a: 96},
            {q: "9 √ó 1", a: 9}, {q: "9 √ó 2", a: 18}, {q: "9 √ó 3", a: 27}, {q: "9 √ó 4", a: 36}, {q: "9 √ó 5", a: 45}, {q: "9 √ó 6", a: 54}, {q: "9 √ó 7", a: 63}, {q: "9 √ó 8", a: 72}, {q: "9 √ó 9", a: 81}, {q: "9 √ó 10", a: 90}, {q: "9 √ó 11", a: 99}, {q: "9 √ó 12", a: 108},
            {q: "10 √ó 1", a: 10}, {q: "10 √ó 2", a: 20}, {q: "10 √ó 3", a: 30}, {q: "10 √ó 4", a: 40}, {q: "10 √ó 5", a: 50}, {q: "10 √ó 6", a: 60}, {q: "10 √ó 7", a: 70}, {q: "10 √ó 8", a: 80}, {q: "10 √ó 9", a: 90}, {q: "10 √ó 10", a: 100}, {q: "10 √ó 11", a: 110}, {q: "10 √ó 12", a: 120},
            {q: "11 √ó 1", a: 11}, {q: "11 √ó 2", a: 22}, {q: "11 √ó 3", a: 33}, {q: "11 √ó 4", a: 44}, {q: "11 √ó 5", a: 55}, {q: "11 √ó 6", a: 66}, {q: "11 √ó 7", a: 77}, {q: "11 √ó 8", a: 88}, {q: "11 √ó 9", a: 99}, {q: "11 √ó 10", a: 110}, {q: "11 √ó 11", a: 121}, {q: "11 √ó 12", a: 132},
            {q: "12 √ó 1", a: 12}, {q: "12 √ó 2", a: 24}, {q: "12 √ó 3", a: 36}, {q: "12 √ó 4", a: 48}, {q: "12 √ó 5", a: 60}, {q: "12 √ó 6", a: 72}, {q: "12 √ó 7", a: 84}, {q: "12 √ó 8", a: 96}, {q: "12 √ó 9", a: 108}, {q: "12 √ó 10", a: 120}, {q: "12 √ó 11", a: 132}, {q: "12 √ó 12", a: 144}
        ];
        
        let currentProblemIndex = 0;
        let correctCount = 0;
        let askedProblems = [];
        let mistakes = []; // Track problems Eva got wrong
        let timeRemaining = 720; // 12 minutes in seconds
        let timerInterval = null;
        let attemptCount = 0; // Track attempts for current problem
        
        function shuffleArray(array) {
            // Create a copy and shuffle it
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function initGame() {
            // Randomly select 84 problems from the 144 available
            const shuffled = shuffleArray([...problems]);
            askedProblems = shuffled.slice(0, 84); // Take first 84 from shuffled array
            currentProblemIndex = 0;
            createStars();
        }
        
        function startGame() {
            document.getElementById('study-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            showNextProblem();
            startTimer();
        }
        
        function startTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            timeRemaining = 720; // Reset to 12 minutes
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    showTimeUp();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timerEl = document.getElementById('timer');
            timerEl.textContent = `‚è∞ ${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Change color based on time remaining
            timerEl.classList.remove('warning', 'danger');
            if (timeRemaining <= 60) {
                timerEl.classList.add('danger');
            } else if (timeRemaining <= 180) {
                timerEl.classList.add('warning');
            }
        }
        
        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }
        
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }
        
        function showNextProblem() {
            if (currentProblemIndex >= askedProblems.length) {
                showCompletion();
                return;
            }
            
            attemptCount = 0; // Reset attempts for new problem
            const problem = askedProblems[currentProblemIndex];
            document.getElementById('question').textContent = problem.q + ' = ?';
            document.getElementById('answer-input').value = '';
            document.getElementById('feedback').textContent = '';
            document.getElementById('answer-input').focus();
            
            // Update problem counter
            document.getElementById('current-problem').textContent = currentProblemIndex + 1;
        }
        
        function checkAnswer() {
            const userAnswer = parseInt(document.getElementById('answer-input').value);
            const correctAnswer = askedProblems[currentProblemIndex].a;
            const feedbackEl = document.getElementById('feedback');
            
            if (isNaN(userAnswer)) {
                feedbackEl.textContent = 'Please enter a number! ü§î';
                feedbackEl.className = 'feedback';
                return;
            }
            
            if (userAnswer === correctAnswer) {
                correctCount++;
                feedbackEl.textContent = 'üéâ Correct! Amazing!';
                feedbackEl.className = 'feedback correct';
                createConfetti();
                updateProgress();
                
                setTimeout(() => {
                    currentProblemIndex++;
                    showNextProblem();
                }, 1500);
            } else {
                attemptCount++;
                
                // Track the mistake
                const problem = askedProblems[currentProblemIndex];
                const existingMistake = mistakes.find(m => m.q === problem.q);
                
                if (!existingMistake) {
                    mistakes.push({
                        q: problem.q,
                        correctAnswer: problem.a,
                        wrongAnswers: [userAnswer]
                    });
                } else {
                    if (!existingMistake.wrongAnswers.includes(userAnswer)) {
                        existingMistake.wrongAnswers.push(userAnswer);
                    }
                }
                
                // After 2 incorrect attempts, move to next question
                if (attemptCount >= 2) {
                    feedbackEl.textContent = `The answer was ${correctAnswer}. Let's try the next one! üí™`;
                    feedbackEl.className = 'feedback incorrect';
                    
                    setTimeout(() => {
                        currentProblemIndex++;
                        showNextProblem();
                    }, 2000);
                } else {
                    feedbackEl.textContent = 'üí™ Try again! You can do it!';
                    feedbackEl.className = 'feedback incorrect';
                    document.getElementById('answer-input').value = '';
                }
            }
        }
        
        function updateProgress() {
            const percentage = (correctCount / 84) * 100;
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = correctCount + ' / 84';
            document.getElementById('correct-count').textContent = correctCount;
        }
        
        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#a8e6cf', '#ffd93d', '#ff8fab'];
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.3 + 's';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
        }
        
        function showCompletion() {
            stopTimer();
            document.getElementById('completion-modal').style.display = 'flex';
            
            // Show results summary
            document.getElementById('results-summary').style.display = 'block';
            document.getElementById('score-display').textContent = `${correctCount} / 84`;
            const percentage = Math.round((correctCount / 84) * 100);
            document.getElementById('percentage-display').textContent = `${percentage}% Correct`;
            
            // Show mistakes review if there are any
            if (mistakes.length > 0) {
                document.getElementById('mistakes-review').style.display = 'block';
                const mistakesList = document.getElementById('mistakes-list');
                mistakesList.innerHTML = '';
                
                mistakes.forEach((mistake, index) => {
                    const mistakeItem = document.createElement('div');
                    mistakeItem.className = 'mistake-item';
                    
                    const wrongAnswersText = mistake.wrongAnswers.map(w => 
                        `<span class="wrong-answer">${w}</span>`
                    ).join(', ');
                    
                    mistakeItem.innerHTML = `
                        <div class="mistake-problem">${mistake.q} = ?</div>
                        <div class="mistake-details">
                            You tried: ${wrongAnswersText}<br>
                            ‚úì Correct answer: <span class="correct-answer">${mistake.correctAnswer}</span>
                        </div>
                    `;
                    
                    mistakesList.appendChild(mistakeItem);
                });
            }
            
            createMassiveConfetti();
        }
        
        function showTimeUp() {
            stopTimer();
            const modal = document.getElementById('completion-modal');
            const modalContent = modal.querySelector('.modal-content');
            
            modalContent.querySelector('.emoji').textContent = '‚è∞';
            modalContent.querySelector('.modal-title').textContent = 'Time\'s Up!';
            modalContent.querySelector('.modal-message').innerHTML = 
                `Great effort, Eva! üí™`;
            
            // Show results summary
            document.getElementById('results-summary').style.display = 'block';
            document.getElementById('score-display').textContent = `${correctCount} / 84`;
            const percentage = Math.round((correctCount / 84) * 100);
            document.getElementById('percentage-display').textContent = `${percentage}% Correct`;
            
            // Show mistakes review if there are any
            if (mistakes.length > 0) {
                document.getElementById('mistakes-review').style.display = 'block';
                const mistakesList = document.getElementById('mistakes-list');
                mistakesList.innerHTML = '';
                
                mistakes.forEach((mistake, index) => {
                    const mistakeItem = document.createElement('div');
                    mistakeItem.className = 'mistake-item';
                    
                    const wrongAnswersText = mistake.wrongAnswers.map(w => 
                        `<span class="wrong-answer">${w}</span>`
                    ).join(', ');
                    
                    mistakeItem.innerHTML = `
                        <div class="mistake-problem">${mistake.q} = ?</div>
                        <div class="mistake-details">
                            You tried: ${wrongAnswersText}<br>
                            ‚úì Correct answer: <span class="correct-answer">${mistake.correctAnswer}</span>
                        </div>
                    `;
                    
                    mistakesList.appendChild(mistakeItem);
                });
            }
            
            modal.style.display = 'flex';
        }
        
        function createMassiveConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#a8e6cf', '#ffd93d', '#ff8fab'];
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }
        
        function restartGame() {
            currentProblemIndex = 0;
            correctCount = 0;
            mistakes = []; // Clear mistakes for new game
            timeRemaining = 720;
            attemptCount = 0;
            
            // Reset modal content
            const modalContent = document.getElementById('completion-modal').querySelector('.modal-content');
            modalContent.querySelector('.emoji').textContent = 'üéâ';
            modalContent.querySelector('.modal-title').textContent = 'Amazing Job, Eva!';
            modalContent.querySelector('.modal-message').innerHTML = 
                'You completed all 84 problems!<br>You\'re a Math Champion! üèÜ';
            
            document.getElementById('completion-modal').style.display = 'none';
            document.getElementById('results-summary').style.display = 'none';
            document.getElementById('mistakes-review').style.display = 'none';
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('study-screen').style.display = 'block';
            updateProgress();
            initGame();
        }
        
        // Allow Enter key to submit answer
        document.getElementById('answer-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // Initialize game on load
        initGame();
    </script>
    
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
